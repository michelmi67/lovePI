<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>LovePi</title> <!-- 1) Active le sandbox et configure le backend -->
    <script>
      window.__PI_SANDBOX__ = true;
      window.__ENV = {
        backendURL: "https://lovepi-backend.onrender.com"
      };
    </script>
    <!-- 2) Charge le Pi SDK -->
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <!-- 3) Initialise le SDK en mode sandbox -->
    <script>
      Pi.init({
        version: "2.0",
        sandbox: true
      });
    </script>
    <!-- 4) Charge le client Socket.IO pour le chat -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <!-- 5) Ton CSS -->
    <link rel="stylesheet" href="styles.css">
    <button onclick="testPayment()">Test Paiement Pi</button>
<script>
function testPayment() {
  if (!window.Pi) return alert("Pi SDK non dispo");
  window.Pi.createPayment({
    amount: 0.01,
    memo: "Test Pi",
    metadata: { step: "final" }
  }, {
    onReadyForServerApproval(paymentId) { alert("Server approval: " + paymentId); },
    onReadyForServerCompletion(paymentId, txid) { alert("Terminé! " + paymentId); },
    onCancel(paymentId) { alert("Annulé " + paymentId); },
    onError(e) { alert("Erreur: " + JSON.stringify(e)); }
  });
}
</script>

  </head>
  <body>
    <h1>Loading LovePi…</h1>
     <!-- 6) Point d’entrée applicatif unique -->
    <script src="app.js"></script>
  </body>
</html>
